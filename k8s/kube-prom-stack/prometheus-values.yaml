# prometheus-values.yaml
nameOverride: "promstack"
fullnameOverride: "promstack"

grafana:
  enabled: true
  # Specify the adminpassword on the command line when installing.
  # helm install promstack prometheus-community/kube-prometheus-stack \
  # --namespace default \
  # --create-namespace \
  # --set grafana.adminPassword=Password123

  # Service configuration to match your ingress
  service:
    name: promstack-grafana
    port: 80

prometheus:
  prometheusSpec:
    serviceMonitorSelectorNilUsesHelmValues: false
    serviceMonitorSelector: {}
    serviceMonitorNamespaceSelector: {}
    podMonitorSelectorNilUsesHelmValues: false
    podMonitorSelector: {}
    podMonitorNamespaceSelector: {}

  # Service configuration to match your ingress
  service:
    name: promstack-kube-prometheus-prometheus
    port: 9090

# Add PostgreSQL monitoring
additionalServiceMonitors:
  - name: cloudnative-pg
    selector:
      matchLabels:
        postgresql: cloudnative-pg
    namespaceSelector:
      matchNames:
        - cnpg-system
    endpoints:
      - port: metrics
        interval: 30s